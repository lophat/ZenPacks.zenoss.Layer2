<!--
##############################################################################
# 
# Copyright (C) Zenoss, Inc. 2014, all rights reserved.
# 
# This content is made available according to terms specified in
# License.zenoss under the directory where your Zenoss product is installed.
# 
##############################################################################
-->

<tal:block metal:use-macro="context/page_macros/base-new">
    <tal:block metal:fill-slot="title">Layer 2 network map</tal:block>

    <tal:block metal:fill-slot="head-local">
        <script type="text/javascript" src="/++resource++ZenPacks_zenoss_Layer2/js/d3.v3.min.js"></script>
        <script type="text/javascript" src="/++resource++ZenPacks_zenoss_Layer2/js/render_network_map.js"></script>
        <style type="text/css">
          #center {
              height: 100%;
              overflow: hidden;
              position: relative;
          }
          #zennetmap {
            height: 100%;
            width: 100%;
            overflow: hidden;
            position: relative; 
            background-color: white;
        }
        .link {
            stroke: #ccc;
        }
        .node text {
            pointer-events: none;
            font: 10px sans-serif;
        }
        input {
            margin-right: 2em;
        }
        form#nmdevice {
           padding-left: 10em; 
           width: 100%;
           float: left;
        }
        </style>
    </tal:block>

    <tal:block metal:fill-slot="center_panel_content">
        <form id="nmdevice">
            Device ID: <input type="text" name="root_id" /> 
            Depth: <input type="text" name="depth" />
            Filter: <input type="text" name="filter" />
            <button type="button" id="refresh_button">Refresh map</button>
            <button type="button" id="center_button">Center map</button>
            <span id="scale_display" title="Use mousewheel to scale">Scale: 100%</span>
        </form>
        <div id="zennetmap"></div>
    </tal:block>

    <tal:block metal:fill-slot="script_afterLayout">
    <!-- Use this slot to perform any post-layout steps. -->
        <script type="text/javascript">
            Ext.onReady(function(){
                render_network_map('#zennetmap', '#nmdevice');
            });
        </script>
    </tal:block>
</tal:block>
